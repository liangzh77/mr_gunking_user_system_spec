# =============================================================================
# 生产环境配置文件 (.env.production)
# =============================================================================
# ⚠️ 安全警告：
# - 此文件包含敏感信息，切勿提交到Git仓库！
# - 所有密钥必须使用强随机字符串替换！
# - 生产环境必须使用HTTPS
# - 定期轮换密钥和证书
# =============================================================================

# ==================== Database Configuration ====================
# 生产环境使用PostgreSQL
# 格式: postgresql+asyncpg://用户名:密码@主机:端口/数据库名
DATABASE_URL=postgresql+asyncpg://mr_admin:CHANGE_THIS_PASSWORD@postgres:5432/mr_game_ops
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_ECHO=false

# ==================== Redis Configuration ====================
# 生产环境必须配置Redis用于缓存和会话管理
# 格式: redis://主机:端口/数据库编号
REDIS_URL=redis://:CHANGE_THIS_REDIS_PASSWORD@redis:6379/0
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ==================== Security Configuration ====================
# ⚠️ 必须更改！使用以下命令生成强随机密钥：
# python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=nSVo5fO5vvkyOb4viMC5uxJAdJvLW31LgQMfdD8DvS6P4buhXTsNolrhmyjzBHrE
JWT_SECRET_KEY=nSVo5fO5vvkyOb4viMC5uxJAdJvLW31LgQMfdD8DvS6P4buhXTsNolrhmyjzBHrE
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=43200
# ENCRYPTION_KEY必须恰好32字节（32个ASCII字符）
ENCRYPTION_KEY=TIyzmEytC4jsl4ziHoBgWm5wroBzRBXQ

# ==================== Application Configuration ====================
APP_NAME=MR游戏运营管理系统
APP_VERSION=0.1.0
DEBUG=false
ENVIRONMENT=production

# ==================== API Configuration ====================
API_V1_PREFIX=/api/v1
# ⚠️ 修改为实际的生产域名
CORS_ORIGINS=http://121.41.231.69,http://localhost:5173
CORS_ALLOW_CREDENTIALS=true
MAX_REQUEST_SIZE=10485760

# ==================== Server Configuration ====================
HOST=0.0.0.0
PORT=8000
# 生产环境建议workers = (CPU核心数 * 2) + 1
WORKERS=4
RELOAD=false

# ==================== Rate Limiting Configuration ====================
# 生产环境严格的限流设置
RATE_LIMIT_PER_MINUTE=10
RATE_LIMIT_IP_PER_MINUTE=100

# ==================== Logging Configuration ====================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/mr_game_ops/app.log

# ==================== Payment Platform Configuration ====================
# ⚠️ 生产环境必须配置真实的支付平台密钥
# 微信支付配置
WECHAT_PAY_APP_ID=YOUR_WECHAT_APP_ID
WECHAT_PAY_MCH_ID=YOUR_WECHAT_MERCHANT_ID
WECHAT_PAY_API_KEY=YOUR_WECHAT_API_KEY

# 支付宝配置
ALIPAY_APP_ID=YOUR_ALIPAY_APP_ID
ALIPAY_PRIVATE_KEY=YOUR_ALIPAY_PRIVATE_KEY_BASE64
ALIPAY_PUBLIC_KEY=YOUR_ALIPAY_PUBLIC_KEY_BASE64

# ==================== File Storage Configuration ====================
# 生产环境建议使用绝对路径或云存储
UPLOAD_DIR=/var/www/mr_game_ops/uploads
INVOICE_DIR=/var/www/mr_game_ops/invoices
MAX_FILE_SIZE=5242880

# ==================== Business Configuration ====================
# 这些配置存储在数据库中，此处仅作备份
BALANCE_THRESHOLD=100.00
SESSION_TIMEOUT_MINUTES=30
PAYMENT_TIMEOUT_MINUTES=5

# ==================== Monitoring and Alerting ====================
# Sentry错误追踪（可选）
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Prometheus监控端点（可选）
# METRICS_ENABLED=true
# METRICS_PORT=9090

# ==================== Email Configuration (可选) ====================
# 用于发送通知邮件
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=noreply@yourdomain.com
# SMTP_PASSWORD=YOUR_SMTP_PASSWORD
# SMTP_FROM=MR游戏运营系统 <noreply@yourdomain.com>

# ==================== Backup Configuration ====================
# 数据库备份设置
# BACKUP_ENABLED=true
# BACKUP_SCHEDULE=0 2 * * *
# BACKUP_RETENTION_DAYS=30
# BACKUP_STORAGE_PATH=/var/backups/mr_game_ops
