# =============================================================================
# 环境配置模板文件 (.env.example)
# =============================================================================
# 说明：
# 1. 复制此文件并重命名为 .env 或使用预设的环境文件：
#    - 开发环境: cp .env.development .env
#    - 生产环境: cp .env.production .env
# 2. 根据实际情况修改配置值
# 3. ⚠️ .env 文件包含敏感信息，已在 .gitignore 中排除，切勿提交到Git！
# =============================================================================

# ==================== Database Configuration ====================
# 数据库连接URL
# 开发环境 (SQLite):  sqlite+aiosqlite:///./mr_game_ops.db
# 生产环境 (PostgreSQL): postgresql+asyncpg://用户名:密码@主机:端口/数据库名
DATABASE_URL=sqlite+aiosqlite:///./mr_game_ops.db
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_ECHO=false

# ==================== Redis Configuration ====================
# Redis用于缓存和会话管理（可选，开发环境可留空）
# 格式: redis://[密码@]主机:端口/数据库编号
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ==================== Security Configuration ====================
# ⚠️ 生产环境必须修改这些密钥！
# 生成强随机密钥: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your_secret_key_here_at_least_32_characters_long
JWT_SECRET_KEY=your_jwt_secret_key_here_at_least_32_characters
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=43200
# ENCRYPTION_KEY 必须恰好32字节
ENCRYPTION_KEY=your_32_byte_encryption_key_here

# ==================== Application Configuration ====================
APP_NAME=MR游戏运营管理系统
APP_VERSION=0.1.0
DEBUG=true
ENVIRONMENT=development

# ==================== API Configuration ====================
API_V1_PREFIX=/api/v1
# CORS允许的源（逗号分隔）
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOW_CREDENTIALS=true
# 最大请求体大小（字节）
MAX_REQUEST_SIZE=10485760

# ==================== Server Configuration ====================
HOST=0.0.0.0
PORT=8000
# Worker进程数（生产环境建议: CPU核心数 * 2 + 1）
WORKERS=1
# 开发环境启用热重载
RELOAD=true

# ==================== Rate Limiting Configuration ====================
# 每分钟单个端点请求限制
RATE_LIMIT_PER_MINUTE=10
# 每分钟单个IP请求限制
RATE_LIMIT_IP_PER_MINUTE=100

# ==================== Logging Configuration ====================
# 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# 日志格式: json, text
LOG_FORMAT=json
LOG_FILE_PATH=logs/app.log

# ==================== Payment Platform Configuration ====================
# 微信支付配置（生产环境需填写真实值）
WECHAT_PAY_APP_ID=
WECHAT_PAY_MCH_ID=
WECHAT_PAY_API_KEY=

# 支付宝配置（生产环境需填写真实值）
ALIPAY_APP_ID=
ALIPAY_PRIVATE_KEY=
ALIPAY_PUBLIC_KEY=

# ==================== File Storage Configuration ====================
# 文件上传目录
UPLOAD_DIR=uploads
# 发票存储目录
INVOICE_DIR=invoices
# 最大文件大小（字节）
MAX_FILE_SIZE=5242880

# ==================== Business Configuration ====================
# 这些配置存储在数据库system_configs表中，此处仅作备份
# 余额不足提醒阈值（元）
BALANCE_THRESHOLD=100.00
# 会话超时时间（分钟）
SESSION_TIMEOUT_MINUTES=30
# 支付超时时间（分钟）
PAYMENT_TIMEOUT_MINUTES=5

# ==================== Optional: Monitoring and Alerting ====================
# Sentry错误追踪DSN（可选）
# SENTRY_DSN=

# Prometheus监控（可选）
# METRICS_ENABLED=false
# METRICS_PORT=9090

# ==================== Optional: Email Configuration ====================
# SMTP邮件发送配置（用于通知，可选）
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=noreply@yourdomain.com
# SMTP_PASSWORD=
# SMTP_FROM=MR游戏运营系统 <noreply@yourdomain.com>

# ==================== Optional: Backup Configuration ====================
# 数据库自动备份（可选）
# BACKUP_ENABLED=false
# BACKUP_SCHEDULE=0 2 * * *
# BACKUP_RETENTION_DAYS=30
# BACKUP_STORAGE_PATH=/var/backups/mr_game_ops
