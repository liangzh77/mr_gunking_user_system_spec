# ç®¡ç†è„šæœ¬ä½¿ç”¨è¯´æ˜

æœ¬ç›®å½•åŒ…å«ç”¨äºç®¡ç† MR æ¸¸æˆè¿è¥ç®¡ç†ç³»ç»Ÿè´¦å·çš„è„šæœ¬ã€‚

## ğŸ“ è„šæœ¬åˆ—è¡¨

| è„šæœ¬æ–‡ä»¶ | åŠŸèƒ½è¯´æ˜ |
|---------|---------|
| `create_admin_simple.py` | åˆ›å»ºåˆå§‹ç®¡ç†å‘˜è´¦å· |
| `create_admin.py` | åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼ˆå®Œæ•´ç‰ˆï¼‰ |
| `change_password.py` | ä¿®æ”¹ä»»æ„ç”¨æˆ·å¯†ç  |
| `manage_finance_user.py` | ç®¡ç†è´¢åŠ¡ç”¨æˆ·ï¼ˆåˆ›å»º/ä¿®æ”¹å¯†ç /åˆ—è¡¨ï¼‰ |

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åœ¨å®¹å™¨ä¸­æ‰§è¡Œè„šæœ¬

æ‰€æœ‰è„šæœ¬éƒ½éœ€è¦åœ¨ backend å®¹å™¨ä¸­æ‰§è¡Œï¼š

```bash
# é€šç”¨æ ¼å¼
docker exec mr_game_ops_backend_prod python /app/scripts/<è„šæœ¬å>.py [å‚æ•°]
```

---

## ğŸ“– è¯¦ç»†ä½¿ç”¨è¯´æ˜

### 1. åˆ›å»ºåˆå§‹ç®¡ç†å‘˜ï¼ˆé¦–æ¬¡éƒ¨ç½²æ—¶ä½¿ç”¨ï¼‰

```bash
docker exec mr_game_ops_backend_prod python /app/scripts/create_admin_simple.py
```

**é»˜è®¤å‡­æ®**ï¼š
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`
- è§’è‰²: `super_admin`

---

### 2. ä¿®æ”¹ç”¨æˆ·å¯†ç 

```bash
# ä¿®æ”¹ç®¡ç†å‘˜å¯†ç 
docker exec mr_game_ops_backend_prod python /app/scripts/change_password.py admin NewPassword123!

# ä¿®æ”¹è´¢åŠ¡ç”¨æˆ·å¯†ç 
docker exec mr_game_ops_backend_prod python /app/scripts/change_password.py finance001 NewPassword456!
```

**å‚æ•°è¯´æ˜**ï¼š
- ç¬¬1ä¸ªå‚æ•°ï¼šç”¨æˆ·å
- ç¬¬2ä¸ªå‚æ•°ï¼šæ–°å¯†ç 

---

### 3. ç®¡ç†è´¢åŠ¡ç”¨æˆ·

#### 3.1 åˆ›å»ºè´¢åŠ¡ç”¨æˆ·

```bash
docker exec mr_game_ops_backend_prod python /app/scripts/manage_finance_user.py create <ç”¨æˆ·å> <å¯†ç > <å§“å> [é‚®ç®±] [æ‰‹æœº]
```

**ç¤ºä¾‹**ï¼š
```bash
# å®Œæ•´å‚æ•°
docker exec mr_game_ops_backend_prod python /app/scripts/manage_finance_user.py create finance001 Finance123! å¼ è´¢åŠ¡ zhang@example.com 13800138001

# æœ€å°‘å‚æ•°ï¼ˆé‚®ç®±å’Œæ‰‹æœºä½¿ç”¨é»˜è®¤å€¼ï¼‰
docker exec mr_game_ops_backend_prod python /app/scripts/manage_finance_user.py create finance001 Finance123! å¼ è´¢åŠ¡
```

**è´¢åŠ¡ç”¨æˆ·æƒé™**ï¼š
- `finance:read` - æŸ¥çœ‹è´¢åŠ¡ä¿¡æ¯
- `finance:recharge` - å……å€¼æ“ä½œ
- `finance:refund` - é€€æ¬¾æ“ä½œ
- `invoice:read` - æŸ¥çœ‹å‘ç¥¨
- `invoice:create` - åˆ›å»ºå‘ç¥¨
- `statistics:read` - æŸ¥çœ‹ç»Ÿè®¡æ•°æ®

#### 3.2 ä¿®æ”¹è´¢åŠ¡ç”¨æˆ·å¯†ç 

```bash
docker exec mr_game_ops_backend_prod python /app/scripts/manage_finance_user.py password <ç”¨æˆ·å> <æ–°å¯†ç >
```

**ç¤ºä¾‹**ï¼š
```bash
docker exec mr_game_ops_backend_prod python /app/scripts/manage_finance_user.py password finance001 NewPass789!
```

#### 3.3 åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·

```bash
docker exec mr_game_ops_backend_prod python /app/scripts/manage_finance_user.py list
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
å½“å‰ç”¨æˆ·åˆ—è¡¨ï¼š
----------------------------------------------------------------------------------------------------
ç”¨æˆ·å           å§“å            è§’è‰²            é‚®ç®±                      çŠ¶æ€     åˆ›å»ºæ—¶é—´
----------------------------------------------------------------------------------------------------
admin           ç³»ç»Ÿç®¡ç†å‘˜       super_admin     admin@mrgameops.com       æ¿€æ´»     2025-10-24 07:55:34
finance001      å¼ è´¢åŠ¡          finance         zhang@example.com         æ¿€æ´»     2025-10-24 12:00:00
----------------------------------------------------------------------------------------------------
æ€»è®¡: 2 ä¸ªç”¨æˆ·
```

---

## ğŸ”’ å®‰å…¨å»ºè®®

1. **é¦–æ¬¡éƒ¨ç½²åç«‹å³ä¿®æ”¹ç®¡ç†å‘˜å¯†ç **ï¼š
   ```bash
   docker exec mr_game_ops_backend_prod python /app/scripts/change_password.py admin YourStrongPassword!
   ```

2. **ä½¿ç”¨å¼ºå¯†ç **ï¼š
   - è‡³å°‘ 12 ä¸ªå­—ç¬¦
   - åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
   - ä¸è¦ä½¿ç”¨å¸¸è§å•è¯æˆ–ç”Ÿæ—¥

3. **å®šæœŸæ›´æ¢å¯†ç **ï¼š
   - å»ºè®®æ¯ 3-6 ä¸ªæœˆæ›´æ¢ä¸€æ¬¡

4. **è´¢åŠ¡ç”¨æˆ·ç®¡ç†**ï¼š
   - ä¸ºæ¯ä¸ªè´¢åŠ¡äººå‘˜åˆ›å»ºç‹¬ç«‹è´¦å·
   - ç¦»èŒæ—¶ç«‹å³ç¦ç”¨è´¦å·

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“è¿æ¥**ï¼š
   - æ‰€æœ‰è„šæœ¬ä½¿ç”¨ç¡¬ç¼–ç çš„æ•°æ®åº“å‡­æ®
   - å¦‚æœä¿®æ”¹äº†æ•°æ®åº“å¯†ç ï¼Œéœ€è¦æ›´æ–°è„šæœ¬ä¸­çš„è¿æ¥å­—ç¬¦ä¸²

2. **æ‰§è¡Œç¯å¢ƒ**ï¼š
   - å¿…é¡»åœ¨ backend å®¹å™¨ä¸­æ‰§è¡Œ
   - ç¡®ä¿å®¹å™¨æ­£åœ¨è¿è¡Œ

3. **æƒé™**ï¼š
   - åªæœ‰å…·æœ‰å®¹å™¨è®¿é—®æƒé™çš„ç®¡ç†å‘˜æ‰èƒ½æ‰§è¡Œè¿™äº›è„šæœ¬

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šæ‰¾ä¸åˆ°æ¨¡å— 'src'

**åŸå› **ï¼šè„šæœ¬è·¯å¾„é…ç½®é—®é¢˜

**è§£å†³**ï¼šç¡®ä¿åœ¨å®¹å™¨çš„ `/app` ç›®å½•ä¸‹æ‰§è¡Œè„šæœ¬

### é—®é¢˜ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**åŸå› **ï¼šæ•°æ®åº“å‡­æ®ä¸æ­£ç¡®æˆ–æ•°æ®åº“æœªå¯åŠ¨

**è§£å†³**ï¼š
1. æ£€æŸ¥æ•°æ®åº“å®¹å™¨çŠ¶æ€ï¼š`docker compose -f docker-compose.yml ps`
2. æ£€æŸ¥æ•°æ®åº“å¯†ç æ˜¯å¦æ­£ç¡®

### é—®é¢˜ï¼šç”¨æˆ·å·²å­˜åœ¨

**åŸå› **ï¼šå°è¯•åˆ›å»ºå·²å­˜åœ¨çš„ç”¨æˆ·å

**è§£å†³**ï¼š
1. ä½¿ç”¨ä¸åŒçš„ç”¨æˆ·å
2. æˆ–ä½¿ç”¨ `change_password.py` ä¿®æ”¹ç°æœ‰ç”¨æˆ·çš„å¯†ç 
