# =============================================================================
# 生产环境配置模板
# =============================================================================
# 使用说明：
# 1. 复制此文件为 .env.production
# 2. 修改所有标记为 CHANGE_THIS 的值
# 3. 生成安全密钥: openssl rand -base64 32
# 4. 不要将 .env.production 提交到版本控制
# =============================================================================

# ==================== 应用信息 ====================
APP_NAME=MR游戏运营管理系统
APP_VERSION=0.1.0
ENVIRONMENT=production
DEBUG=false

# ==================== 数据库配置 ====================
POSTGRES_USER=mr_admin
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_32_CHARS_MIN
POSTGRES_DB=mr_game_ops
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# 数据库连接URL（自动构建，无需修改）
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ==================== Redis 配置 ====================
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD_32_CHARS_MIN
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5

# Redis 连接URL
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ==================== 安全密钥 ====================
# 使用以下命令生成随机密钥:
# openssl rand -base64 32

# JWT 密钥（32字符以上）
JWT_SECRET_KEY=CHANGE_THIS_JWT_SECRET_KEY_MINIMUM_32_CHARACTERS_LONG_USE_OPENSSL_RAND

# 加密密钥（必须正好32字符）
ENCRYPTION_KEY=CHANGE_THIS_EXACTLY_32_CHARS!

# JWT 配置
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440

# ==================== CORS 配置 ====================
# 允许的前端域名（逗号分隔）
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com,https://admin.yourdomain.com

# ==================== 文件存储 ====================
UPLOAD_MAX_SIZE_MB=10
INVOICE_STORAGE_PATH=/var/www/mr-game-ops/invoices
UPLOAD_STORAGE_PATH=/var/www/mr-game-ops/uploads

# ==================== 日志配置 ====================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/mr_game_ops/app.log

# ==================== 支付配置（示例）====================
# 支付平台 API 配置
PAYMENT_API_URL=https://api.payment-provider.com
PAYMENT_API_KEY=CHANGE_THIS_PAYMENT_API_KEY
PAYMENT_API_SECRET=CHANGE_THIS_PAYMENT_API_SECRET
PAYMENT_CALLBACK_URL=https://yourdomain.com/api/v1/webhooks/payment

# ==================== 邮件配置 ====================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=CHANGE_THIS_SMTP_PASSWORD
SMTP_FROM_EMAIL=noreply@yourdomain.com
SMTP_FROM_NAME=MR游戏运营管理系统

# ==================== 监控配置 ====================
PROMETHEUS_ENABLED=true
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_GRAFANA_PASSWORD

# ==================== Gunicorn 配置 ====================
GUNICORN_WORKERS=4
GUNICORN_TIMEOUT=60
GUNICORN_KEEPALIVE=5
GUNICORN_MAX_REQUESTS=1000
GUNICORN_MAX_REQUESTS_JITTER=100

# ==================== 速率限制 ====================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE_OPERATOR=10
RATE_LIMIT_PER_MINUTE_IP=100

# ==================== 前端配置 ====================
VITE_API_BASE_URL=https://api.yourdomain.com/api/v1

# ==================== 备份配置 ====================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=@daily
BACKUP_KEEP_DAYS=30
BACKUP_KEEP_WEEKS=8
BACKUP_KEEP_MONTHS=6
BACKUP_PATH=./backups

# ==================== Sentry 错误追踪（可选）====================
SENTRY_ENABLED=false
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ==================== 其他配置 ====================
TZ=Asia/Shanghai
LANG=zh_CN.UTF-8
