# ç”Ÿäº§çŽ¯å¢ƒç®¡ç†è„šæœ¬

æœ¬ç›®å½•åŒ…å«ç”Ÿäº§çŽ¯å¢ƒçš„è´¦æˆ·ç®¡ç†è„šæœ¬å’Œæ–‡æ¡£ã€‚

## ðŸ“ æ–‡ä»¶è¯´æ˜Ž

| æ–‡ä»¶å | è¯´æ˜Ž |
|--------|------|
| `è´¦æˆ·ç®¡ç†-ç”Ÿäº§çŽ¯å¢ƒ.md` | è¯¦ç»†çš„è´¦æˆ·ç®¡ç†æ‰‹å†Œ |
| `manage_accounts.sh` | è´¦æˆ·ç®¡ç†è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆLinux/Macï¼‰ |
| `README.md` | æœ¬æ–‡ä»¶ |

## ðŸš€ å¿«é€Ÿå¼€å§‹

### Linux / Mac ç”¨æˆ·

#### 1. ä¸Šä¼ è„šæœ¬åˆ°ç”Ÿäº§æœåŠ¡å™¨

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨ gitï¼ˆæŽ¨èï¼‰
cd /opt/mr_gunking_user_system_spec
git pull origin 001-mr-v2

# æ–¹æ³•2ï¼šä½¿ç”¨ scp ä¸Šä¼ 
scp docs/ç”Ÿäº§çŽ¯å¢ƒ/manage_accounts.sh root@your-server:/opt/mr_gunking_user_system_spec/docs/ç”Ÿäº§çŽ¯å¢ƒ/
```

#### 2. èµ‹äºˆæ‰§è¡Œæƒé™

```bash
cd /opt/mr_gunking_user_system_spec/docs/ç”Ÿäº§çŽ¯å¢ƒ
chmod +x manage_accounts.sh
```

#### 3. è¿è¡Œè„šæœ¬

**äº¤äº’å¼èœå•æ¨¡å¼ï¼š**
```bash
./manage_accounts.sh
```

ä¼šæ˜¾ç¤ºå¦‚ä¸‹èœå•ï¼š
```
=========================================
   MRæ¸¸æˆè¿è¥ç®¡ç†ç³»ç»Ÿ - è´¦æˆ·ç®¡ç†
=========================================

1. æŸ¥çœ‹æ‰€æœ‰ç®¡ç†å‘˜è´¦æˆ·
2. æŸ¥çœ‹æ‰€æœ‰è¿è¥å•†è´¦æˆ·
3. åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·
4. åˆ›å»ºè¿è¥å•†è´¦æˆ·
5. é‡ç½®è´¦æˆ·å¯†ç 
6. å¯ç”¨/ç¦ç”¨è´¦æˆ·
7. ä¿®æ”¹ç®¡ç†å‘˜è§’è‰²
8. æ‰¹é‡åˆ›å»ºè¿è¥å•†
9. å¯¼å‡ºè´¦æˆ·ä¿¡æ¯
0. é€€å‡º
```

**å‘½ä»¤è¡Œæ¨¡å¼ï¼š**
```bash
# åˆ—å‡ºæ‰€æœ‰ç®¡ç†å‘˜
./manage_accounts.sh list-admins

# åˆ—å‡ºæ‰€æœ‰è¿è¥å•†
./manage_accounts.sh list-operators

# åˆ›å»ºç®¡ç†å‘˜ï¼ˆäº¤äº’å¼è¾“å…¥ï¼‰
./manage_accounts.sh create-admin

# åˆ›å»ºè¿è¥å•†ï¼ˆäº¤äº’å¼è¾“å…¥ï¼‰
./manage_accounts.sh create-operator

# é‡ç½®å¯†ç ï¼ˆäº¤äº’å¼è¾“å…¥ï¼‰
./manage_accounts.sh reset-password
```

## ðŸ“‹ åŠŸèƒ½è¯¦è§£

### 1. æŸ¥çœ‹æ‰€æœ‰ç®¡ç†å‘˜è´¦æˆ·

æ˜¾ç¤ºæ‰€æœ‰ç®¡ç†å‘˜çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- ç”¨æˆ·å
- å§“å
- é‚®ç®±
- è§’è‰²ï¼ˆsuper_admin / adminï¼‰
- çŠ¶æ€ï¼ˆæ¿€æ´»/ç¦ç”¨ï¼‰
- åˆ›å»ºæ—¶é—´

### 2. æŸ¥çœ‹æ‰€æœ‰è¿è¥å•†è´¦æˆ·

æ˜¾ç¤ºæ‰€æœ‰è¿è¥å•†çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- ç”¨æˆ·å
- å§“å
- é‚®ç®±
- ç”µè¯
- è´¦æˆ·ä½™é¢
- çŠ¶æ€ï¼ˆæ¿€æ´»/ç¦ç”¨ï¼‰
- åˆ›å»ºæ—¶é—´

### 3. åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·

äº¤äº’å¼åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ï¼Œéœ€è¦è¾“å…¥ï¼š
- ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼Œä¸èƒ½é‡å¤ï¼‰
- å¯†ç ï¼ˆå»ºè®®ä½¿ç”¨å¼ºå¯†ç ï¼‰
- å§“å
- é‚®ç®±
- ç”µè¯
- è§’è‰²é€‰æ‹©ï¼ˆsuper_admin æˆ– adminï¼‰

### 4. åˆ›å»ºè¿è¥å•†è´¦æˆ·

äº¤äº’å¼åˆ›å»ºè¿è¥å•†è´¦æˆ·ï¼Œéœ€è¦è¾“å…¥ï¼š
- ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼Œä¸èƒ½é‡å¤ï¼‰
- å¯†ç ï¼ˆå»ºè®®ä½¿ç”¨å¼ºå¯†ç ï¼‰
- è¿è¥å•†åç§°
- é‚®ç®±
- ç”µè¯
- åˆå§‹ä½™é¢ï¼ˆé»˜è®¤1000å…ƒï¼‰

### 5. é‡ç½®è´¦æˆ·å¯†ç 

é‡ç½®ç®¡ç†å‘˜æˆ–è¿è¥å•†çš„å¯†ç ï¼š
1. é€‰æ‹©è´¦æˆ·ç±»åž‹ï¼ˆç®¡ç†å‘˜/è¿è¥å•†ï¼‰
2. è¾“å…¥ç”¨æˆ·å
3. è¾“å…¥æ–°å¯†ç 
4. ç¡®è®¤é‡ç½®

### 6. å¯ç”¨/ç¦ç”¨è´¦æˆ·

å¯ç”¨æˆ–ç¦ç”¨è´¦æˆ·ï¼š
1. é€‰æ‹©è´¦æˆ·ç±»åž‹
2. è¾“å…¥ç”¨æˆ·å
3. é€‰æ‹©æ“ä½œï¼ˆå¯ç”¨/ç¦ç”¨ï¼‰

ç¦ç”¨çš„è´¦æˆ·æ— æ³•ç™»å½•ç³»ç»Ÿã€‚

### 7. ä¿®æ”¹ç®¡ç†å‘˜è§’è‰²

ä¿®æ”¹ç®¡ç†å‘˜çš„è§’è‰²æƒé™ï¼š
1. è¾“å…¥ç”¨æˆ·å
2. é€‰æ‹©æ–°è§’è‰²ï¼ˆsuper_admin / adminï¼‰

### 8. æ‰¹é‡åˆ›å»ºè¿è¥å•†

ä»Ž CSV æ–‡ä»¶æ‰¹é‡å¯¼å…¥è¿è¥å•†è´¦æˆ·ã€‚

**CSV æ ¼å¼ï¼š**
```csv
username,password,full_name,email,phone,initial_balance
operator1,Pass123!,è¿è¥å•†ä¸€,op1@example.com,13800000001,1000
operator2,Pass123!,è¿è¥å•†äºŒ,op2@example.com,13800000002,2000
operator3,Pass123!,è¿è¥å•†ä¸‰,op3@example.com,13800000003,1500
```

**ä½¿ç”¨æ­¥éª¤ï¼š**
1. å‡†å¤‡ CSV æ–‡ä»¶ï¼ˆå¦‚ operators.csvï¼‰
2. è¿è¡Œè„šæœ¬é€‰æ‹©"8"
3. è¾“å…¥ CSV æ–‡ä»¶è·¯å¾„
4. è„šæœ¬è‡ªåŠ¨æ‰¹é‡åˆ›å»º

### 9. å¯¼å‡ºè´¦æˆ·ä¿¡æ¯

å°†è´¦æˆ·ä¿¡æ¯å¯¼å‡ºä¸º CSV æ–‡ä»¶ï¼Œå¯é€‰æ‹©ï¼š
- ä»…å¯¼å‡ºç®¡ç†å‘˜è´¦æˆ·
- ä»…å¯¼å‡ºè¿è¥å•†è´¦æˆ·
- å¯¼å‡ºæ‰€æœ‰è´¦æˆ·

å¯¼å‡ºæ–‡ä»¶ä¼šä¿å­˜åœ¨å½“å‰ç›®å½•ï¼Œæ–‡ä»¶åæ ¼å¼ï¼š
- `admins_20250128_143022.csv`
- `operators_20250128_143022.csv`

## ðŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

1. **è„šæœ¬æƒé™**ï¼š
   - ç¡®ä¿è„šæœ¬åªæœ‰ç®¡ç†å‘˜å¯ä»¥æ‰§è¡Œ
   - å»ºè®®è®¾ç½®æƒé™ï¼š`chmod 700 manage_accounts.sh`

2. **å¯†ç å®‰å…¨**ï¼š
   - é¦–æ¬¡éƒ¨ç½²åŽç«‹å³ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†ç 
   - ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘12ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼‰
   - å®šæœŸæ›´æ¢å¯†ç ï¼ˆå»ºè®®æ¯3ä¸ªæœˆï¼‰

3. **è´¦æˆ·å®¡è®¡**ï¼š
   - å®šæœŸæ£€æŸ¥è´¦æˆ·åˆ—è¡¨
   - ç¦ç”¨ä¸æ´»è·ƒçš„è´¦æˆ·
   - ç›‘æŽ§å¼‚å¸¸ç™»å½•

4. **å¯¼å‡ºæ–‡ä»¶**ï¼š
   - å¯¼å‡ºçš„ CSV æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯
   - ä½¿ç”¨åŽåŠæ—¶åˆ é™¤æˆ–åŠ å¯†ä¿å­˜
   - ä¸è¦ä¸Šä¼ åˆ°å…¬å¼€çš„ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿ

5. **æ—¥å¿—è®°å½•**ï¼š
   - æ‰€æœ‰è´¦æˆ·æ“ä½œéƒ½ä¼šè®°å½•åœ¨æ•°æ®åº“æ—¥å¿—ä¸­
   - å®šæœŸæ£€æŸ¥å®¡è®¡æ—¥å¿—

## ðŸ› ï¸ æ•…éšœæŽ’é™¤

### é—®é¢˜1ï¼šè„šæœ¬æŠ¥é”™"åŽç«¯å®¹å™¨æœªè¿è¡Œ"

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker-compose -f docker-compose.yml ps

# å¦‚æžœæœªè¿è¡Œï¼Œå¯åŠ¨æœåŠ¡
docker-compose -f docker-compose.yml up -d
```

### é—®é¢˜2ï¼šè„šæœ¬æŠ¥é”™"æƒé™ä¸è¶³"

**è§£å†³æ–¹æ³•ï¼š**
```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x manage_accounts.sh

# æˆ–ä½¿ç”¨ bash æ‰§è¡Œ
bash manage_accounts.sh
```

### é—®é¢˜3ï¼šåˆ›å»ºè´¦æˆ·æ—¶æç¤º"ç”¨æˆ·åå·²å­˜åœ¨"

**è§£å†³æ–¹æ³•ï¼š**
```bash
# å…ˆæŸ¥çœ‹çŽ°æœ‰è´¦æˆ·
./manage_accounts.sh list-admins
./manage_accounts.sh list-operators

# ä½¿ç”¨ä¸åŒçš„ç”¨æˆ·åé‡è¯•
```

### é—®é¢˜4ï¼šæ— æ³•è¿žæŽ¥åˆ°æ•°æ®åº“

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥æ•°æ®åº“å®¹å™¨çŠ¶æ€
docker-compose -f docker-compose.yml ps postgres

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker-compose -f docker-compose.yml logs postgres

# é‡å¯æ•°æ®åº“ï¼ˆè°¨æ…Žæ“ä½œï¼‰
docker-compose -f docker-compose.yml restart postgres
```

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [è´¦æˆ·ç®¡ç†è¯¦ç»†æ‰‹å†Œ](./è´¦æˆ·ç®¡ç†-ç”Ÿäº§çŽ¯å¢ƒ.md)
- [ç”Ÿäº§çŽ¯å¢ƒéƒ¨ç½²æŒ‡å—](./ç”Ÿäº§çŽ¯å¢ƒéƒ¨ç½²æŒ‡å—.md)
- [ç¦»çº¿éƒ¨ç½²æŒ‡å—](./ç¦»çº¿éƒ¨ç½²æŒ‡å—.md)

## ðŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šæŸ¥çœ‹æ‰€æœ‰è´¦æˆ·

```bash
# æŸ¥çœ‹ç®¡ç†å‘˜
./manage_accounts.sh list-admins

# æŸ¥çœ‹è¿è¥å•†
./manage_accounts.sh list-operators
```

### ç¤ºä¾‹2ï¼šåˆ›å»ºæ–°ç®¡ç†å‘˜

```bash
./manage_accounts.sh create-admin

# æŒ‰æç¤ºè¾“å…¥ï¼š
# ç”¨æˆ·å: zhang_admin
# å¯†ç : MySecure123!@#
# å§“å: å¼ ä¸‰
# é‚®ç®±: zhang@example.com
# ç”µè¯: 13800138001
# è§’è‰²: 2 (admin)
```

### ç¤ºä¾‹3ï¼šé‡ç½®è¶…çº§ç®¡ç†å‘˜å¯†ç 

```bash
./manage_accounts.sh reset-password

# æŒ‰æç¤ºè¾“å…¥ï¼š
# è´¦æˆ·ç±»åž‹: 1 (ç®¡ç†å‘˜)
# ç”¨æˆ·å: superadmin
# æ–°å¯†ç : NewAdmin123!@#
```

### ç¤ºä¾‹4ï¼šæ‰¹é‡åˆ›å»ºè¿è¥å•†

```bash
# 1. åˆ›å»º CSV æ–‡ä»¶
cat > operators.csv << EOF
username,password,full_name,email,phone,initial_balance
shop_001,Pass123!,ä¸€å·åº—,shop001@example.com,13800000001,5000
shop_002,Pass123!,äºŒå·åº—,shop002@example.com,13800000002,3000
shop_003,Pass123!,ä¸‰å·åº—,shop003@example.com,13800000003,4000
EOF

# 2. è¿è¡Œæ‰¹é‡å¯¼å…¥
./manage_accounts.sh

# é€‰æ‹© 8ï¼Œè¾“å…¥ CSV è·¯å¾„ï¼šoperators.csv
```

### ç¤ºä¾‹5ï¼šå¯¼å‡ºè´¦æˆ·å¤‡ä»½

```bash
./manage_accounts.sh

# é€‰æ‹© 9ï¼ˆå¯¼å‡ºè´¦æˆ·ä¿¡æ¯ï¼‰
# é€‰æ‹© 3ï¼ˆå¯¼å‡ºæ‰€æœ‰è´¦æˆ·ï¼‰

# ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š
# - admins_20250128_143022.csv
# - operators_20250128_143022.csv
```

## ðŸ”„ å®šæœŸç»´æŠ¤ä»»åŠ¡

å»ºè®®å»ºç«‹ä»¥ä¸‹å®šæœŸç»´æŠ¤è®¡åˆ’ï¼š

### æ¯å‘¨ä»»åŠ¡
- [ ] æ£€æŸ¥è´¦æˆ·åˆ—è¡¨ï¼Œç¡®è®¤æ— å¼‚å¸¸è´¦æˆ·
- [ ] æŸ¥çœ‹è¿‘æœŸç™»å½•æ—¥å¿—

### æ¯æœˆä»»åŠ¡
- [ ] å¯¼å‡ºè´¦æˆ·ä¿¡æ¯å¤‡ä»½
- [ ] å®¡è®¡è´¦æˆ·æƒé™
- [ ] ç¦ç”¨é•¿æœŸæœªä½¿ç”¨çš„è´¦æˆ·

### æ¯å­£åº¦ä»»åŠ¡
- [ ] å¼ºåˆ¶æ‰€æœ‰ç®¡ç†å‘˜æ›´æ¢å¯†ç 
- [ ] å®¡æŸ¥è¶…çº§ç®¡ç†å‘˜æ•°é‡
- [ ] æ¸…ç†æµ‹è¯•è´¦æˆ·

## ðŸ“ž æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ [è´¦æˆ·ç®¡ç†è¯¦ç»†æ‰‹å†Œ](./è´¦æˆ·ç®¡ç†-ç”Ÿäº§çŽ¯å¢ƒ.md)
2. æ£€æŸ¥å®¹å™¨å’Œæ•°æ®åº“çŠ¶æ€
3. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶æŽ’æŸ¥é—®é¢˜
4. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ
